<h1 class="mb-3"><%= @movie.title %> - Show Details</h1>

<div class="mb-4">
  <p><strong>Theatre:</strong> <%= @show.theatre.name %></p>
  <p><strong>Start Time:</strong> <%= @show.start_time.strftime("%d %b %Y %I:%M %p") %></p>
  <p><strong>End Time:</strong> <%= @show.end_time.strftime("%d %b %Y %I:%M %p") %></p>
  <p><strong>Ticket Price:</strong> <span class="fw-bold text-primary">₹<%= @show.ticket_price %></span></p>
</div>

<h2 class="mb-3">Seats</h2>
<table class="table table-bordered table-hover shadow-sm">
  <thead class="table-dark">
    <tr>
      <th scope="col">Seat Number</th>
      <th scope="col">Status</th>
      <th scope="col" class="text-center">Action</th>
    </tr>
  </thead>
  <tbody>
    <% @show.seats.each do |seat| %>
      <tr>
        <td><%= seat.seat_number %></td>
        <td>
          <% if seat.available? %>
            <span class="badge bg-success">Available</span>
          <% else %>
            <span class="badge bg-danger">Booked</span>
          <% end %>
        </td>
        <td class="text-center">
          <% if seat.available? %>
            <%= button_to "Book",
                  book_movie_show_seat_path(@movie, @show, seat),
                  method: :patch,
                  class: "btn btn-sm btn-primary",
                  data: { confirm: "Confirm booking for Seat #{seat.seat_number}?" } %>
          <% else %>
            <span class="text-muted">—</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
